{"ast":null,"code":"import _objectSpread from\"C:/my project/Donation-App-master1/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/my project/Donation-App-master1/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"component\",\"auth\",\"allowedRoles\"];import React from'react';import{Route,Redirect}from'react-router-dom';import{connect}from'react-redux';import{CircularProgress,Container}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{let{component:Component,auth:{isAuthenticated,loading,user},// Add user here\nallowedRoles// New prop for role-based access\n}=_ref,rest=_objectWithoutProperties(_ref,_excluded);return/*#__PURE__*/_jsx(Route,_objectSpread(_objectSpread({},rest),{},{render:props=>{if(loading){return/*#__PURE__*/_jsx(Container,{sx:{display:'flex',justifyContent:'center',mt:5},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Redirect,{to:\"/\"});}// Check for role-based access if allowedRoles is provided\nif(allowedRoles&&user&&!allowedRoles.includes(user.role)){// Redirect to a 'not authorized' page or home/dashboard\n// For simplicity, redirecting to home/dashboard based on role\nconst homePath=user.role?\"/\".concat(user.role,\"/dashboard\"):'/';return/*#__PURE__*/_jsx(Redirect,{to:homePath});}return/*#__PURE__*/_jsx(Component,_objectSpread({},props));}}));};const mapStateToProps=state=>({auth:state.auth});export default connect(mapStateToProps)(PrivateRoute);","map":{"version":3,"names":["React","Route","Redirect","connect","CircularProgress","Container","jsx","_jsx","PrivateRoute","_ref","component","Component","auth","isAuthenticated","loading","user","allowedRoles","rest","_objectWithoutProperties","_excluded","_objectSpread","render","props","sx","display","justifyContent","mt","children","to","includes","role","homePath","concat","mapStateToProps","state"],"sources":["C:/my project/Donation-App-master1/frontend/src/components/routing/PrivateRoute.js"],"sourcesContent":["import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { CircularProgress, Container } from '@mui/material';\n\nconst PrivateRoute = ({\n  component: Component,\n  auth: { isAuthenticated, loading, user }, // Add user here\n  allowedRoles, // New prop for role-based access\n  ...rest\n}) => (\n  <Route\n    {...rest}\n    render={(props) => {\n      if (loading) {\n        return (\n          <Container sx={{ display: 'flex', justifyContent: 'center', mt: 5 }}>\n            <CircularProgress />\n          </Container>\n        );\n      }\n      if (!isAuthenticated) {\n        return <Redirect to=\"/\" />;\n      }\n      // Check for role-based access if allowedRoles is provided\n      if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n        // Redirect to a 'not authorized' page or home/dashboard\n        // For simplicity, redirecting to home/dashboard based on role\n        const homePath = user.role ? `/${user.role}/dashboard` : '/';\n        return <Redirect to={homePath} />;\n      }\n      return <Component {...props} />;\n    }}\n  />\n);\n\nPrivateRoute.propTypes = {\n  component: PropTypes.elementType.isRequired,\n  auth: PropTypes.object.isRequired,\n  allowedRoles: PropTypes.arrayOf(PropTypes.string) // Optional: for role-based access\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps)(PrivateRoute);"],"mappings":"yUAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CAElD,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,gBAAgB,CAAEC,SAAS,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5D,KAAM,CAAAC,YAAY,CAAGC,IAAA,MAAC,CACpBC,SAAS,CAAEC,SAAS,CACpBC,IAAI,CAAE,CAAEC,eAAe,CAAEC,OAAO,CAAEC,IAAK,CAAC,CAAE;AAC1CC,YAAc;AAEhB,CAAC,CAAAP,IAAA,CADIQ,IAAI,CAAAC,wBAAA,CAAAT,IAAA,CAAAU,SAAA,qBAEPZ,IAAA,CAACN,KAAK,CAAAmB,aAAA,CAAAA,aAAA,IACAH,IAAI,MACRI,MAAM,CAAGC,KAAK,EAAK,CACjB,GAAIR,OAAO,CAAE,CACX,mBACEP,IAAA,CAACF,SAAS,EAACkB,EAAE,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAC,QAAA,cAClEpB,IAAA,CAACH,gBAAgB,GAAE,CAAC,CACX,CAAC,CAEhB,CACA,GAAI,CAACS,eAAe,CAAE,CACpB,mBAAON,IAAA,CAACL,QAAQ,EAAC0B,EAAE,CAAC,GAAG,CAAE,CAAC,CAC5B,CACA;AACA,GAAIZ,YAAY,EAAID,IAAI,EAAI,CAACC,YAAY,CAACa,QAAQ,CAACd,IAAI,CAACe,IAAI,CAAC,CAAE,CAC7D;AACA;AACA,KAAM,CAAAC,QAAQ,CAAGhB,IAAI,CAACe,IAAI,KAAAE,MAAA,CAAOjB,IAAI,CAACe,IAAI,eAAe,GAAG,CAC5D,mBAAOvB,IAAA,CAACL,QAAQ,EAAC0B,EAAE,CAAEG,QAAS,CAAE,CAAC,CACnC,CACA,mBAAOxB,IAAA,CAACI,SAAS,CAAAS,aAAA,IAAKE,KAAK,CAAG,CAAC,CACjC,CAAE,EACH,CAAC,EACH,CAQD,KAAM,CAAAW,eAAe,CAAIC,KAAK,GAAM,CAClCtB,IAAI,CAAEsB,KAAK,CAACtB,IACd,CAAC,CAAC,CAEF,cAAe,CAAAT,OAAO,CAAC8B,eAAe,CAAC,CAACzB,YAAY,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}