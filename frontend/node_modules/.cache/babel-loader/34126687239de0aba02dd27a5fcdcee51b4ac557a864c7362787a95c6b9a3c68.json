{"ast":null,"code":"var _jsxFileName = \"C:\\\\my project\\\\Donation-App-master1\\\\frontend\\\\src\\\\components\\\\routing\\\\PrivateRoute.js\";\nimport React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { CircularProgress, Container } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = ({\n  component: Component,\n  auth: {\n    isAuthenticated,\n    loading,\n    user\n  },\n  // Add user here\n  allowedRoles,\n  // New prop for role-based access\n  ...rest\n}) => /*#__PURE__*/_jsxDEV(Route, {\n  ...rest,\n  render: props => {\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(Container, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          mt: 5\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 11\n      }, this);\n    }\n    if (!isAuthenticated) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 16\n      }, this);\n    }\n    // Check for role-based access if allowedRoles is provided\n    if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n      // Redirect to a 'not authorized' page or home/dashboard\n      // For simplicity, redirecting to home/dashboard based on role\n      const homePath = user.role ? `/${user.role}/dashboard` : '/';\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: homePath\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 16\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 14\n    }, this);\n  }\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 13,\n  columnNumber: 3\n}, this);\n_c = PrivateRoute;\nPrivateRoute.propTypes = {\n  component: PropTypes.elementType.isRequired,\n  auth: PropTypes.object.isRequired,\n  allowedRoles: PropTypes.arrayOf(PropTypes.string) // Optional: for role-based access\n};\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\nexport default connect(mapStateToProps)(PrivateRoute);\nvar _c;\n$RefreshReg$(_c, \"PrivateRoute\");","map":{"version":3,"names":["React","Route","Redirect","PropTypes","connect","CircularProgress","Container","jsxDEV","_jsxDEV","PrivateRoute","component","Component","auth","isAuthenticated","loading","user","allowedRoles","rest","render","props","sx","display","justifyContent","mt","children","fileName","_jsxFileName","lineNumber","columnNumber","to","includes","role","homePath","_c","propTypes","elementType","isRequired","object","arrayOf","string","mapStateToProps","state","$RefreshReg$"],"sources":["C:/my project/Donation-App-master1/frontend/src/components/routing/PrivateRoute.js"],"sourcesContent":["import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { CircularProgress, Container } from '@mui/material';\n\nconst PrivateRoute = ({\n  component: Component,\n  auth: { isAuthenticated, loading, user }, // Add user here\n  allowedRoles, // New prop for role-based access\n  ...rest\n}) => (\n  <Route\n    {...rest}\n    render={(props) => {\n      if (loading) {\n        return (\n          <Container sx={{ display: 'flex', justifyContent: 'center', mt: 5 }}>\n            <CircularProgress />\n          </Container>\n        );\n      }\n      if (!isAuthenticated) {\n        return <Redirect to=\"/\" />;\n      }\n      // Check for role-based access if allowedRoles is provided\n      if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n        // Redirect to a 'not authorized' page or home/dashboard\n        // For simplicity, redirecting to home/dashboard based on role\n        const homePath = user.role ? `/${user.role}/dashboard` : '/';\n        return <Redirect to={homePath} />;\n      }\n      return <Component {...props} />;\n    }}\n  />\n);\n\nPrivateRoute.propTypes = {\n  component: PropTypes.elementType.isRequired,\n  auth: PropTypes.object.isRequired,\n  allowedRoles: PropTypes.arrayOf(PropTypes.string) // Optional: for role-based access\n};\n\nconst mapStateToProps = (state) => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps)(PrivateRoute);"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AAClD,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,QAAQ,aAAa;AACrC,SAASC,gBAAgB,EAAEC,SAAS,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5D,MAAMC,YAAY,GAAGA,CAAC;EACpBC,SAAS,EAAEC,SAAS;EACpBC,IAAI,EAAE;IAAEC,eAAe;IAAEC,OAAO;IAAEC;EAAK,CAAC;EAAE;EAC1CC,YAAY;EAAE;EACd,GAAGC;AACL,CAAC,kBACCT,OAAA,CAACP,KAAK;EAAA,GACAgB,IAAI;EACRC,MAAM,EAAGC,KAAK,IAAK;IACjB,IAAIL,OAAO,EAAE;MACX,oBACEN,OAAA,CAACF,SAAS;QAACc,EAAE,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEC,cAAc,EAAE,QAAQ;UAAEC,EAAE,EAAE;QAAE,CAAE;QAAAC,QAAA,eAClEhB,OAAA,CAACH,gBAAgB;UAAAoB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC;IAEhB;IACA,IAAI,CAACf,eAAe,EAAE;MACpB,oBAAOL,OAAA,CAACN,QAAQ;QAAC2B,EAAE,EAAC;MAAG;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC5B;IACA;IACA,IAAIZ,YAAY,IAAID,IAAI,IAAI,CAACC,YAAY,CAACc,QAAQ,CAACf,IAAI,CAACgB,IAAI,CAAC,EAAE;MAC7D;MACA;MACA,MAAMC,QAAQ,GAAGjB,IAAI,CAACgB,IAAI,GAAG,IAAIhB,IAAI,CAACgB,IAAI,YAAY,GAAG,GAAG;MAC5D,oBAAOvB,OAAA,CAACN,QAAQ;QAAC2B,EAAE,EAAEG;MAAS;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IACnC;IACA,oBAAOpB,OAAA,CAACG,SAAS;MAAA,GAAKQ;IAAK;MAAAM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EACjC;AAAE;EAAAH,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OACH,CACF;AAACK,EAAA,GA7BIxB,YAAY;AA+BlBA,YAAY,CAACyB,SAAS,GAAG;EACvBxB,SAAS,EAAEP,SAAS,CAACgC,WAAW,CAACC,UAAU;EAC3CxB,IAAI,EAAET,SAAS,CAACkC,MAAM,CAACD,UAAU;EACjCpB,YAAY,EAAEb,SAAS,CAACmC,OAAO,CAACnC,SAAS,CAACoC,MAAM,CAAC,CAAC;AACpD,CAAC;AAED,MAAMC,eAAe,GAAIC,KAAK,KAAM;EAClC7B,IAAI,EAAE6B,KAAK,CAAC7B;AACd,CAAC,CAAC;AAEF,eAAeR,OAAO,CAACoC,eAAe,CAAC,CAAC/B,YAAY,CAAC;AAAC,IAAAwB,EAAA;AAAAS,YAAA,CAAAT,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}