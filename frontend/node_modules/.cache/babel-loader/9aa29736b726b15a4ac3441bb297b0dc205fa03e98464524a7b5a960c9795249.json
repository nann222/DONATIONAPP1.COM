{"ast":null,"code":"import React,{useEffect}from'react';import{connect}from'react-redux';import{getRequests}from'../../actions/request';// Recipients see their requests\nimport{getDonations}from'../../actions/donation';// Recipients see donations they received\nimport{Typography,Container,Paper,Grid,Card,CardContent,CircularProgress,Box,Button,List,ListItem,ListItemText,Divider}from'@mui/material';import{Link as RouterLink}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RecipientDashboard=_ref=>{let{getRequests,getDonations,request:{requests,loading:requestsLoading},donation:{donations,loading:donationsLoading},// donations received by this recipient\nauth:{user}}=_ref;useEffect(()=>{getRequests();getDonations();// This action should be smart enough to fetch donations for this recipient\n},[getRequests,getDonations]);if(requestsLoading||donationsLoading){return/*#__PURE__*/_jsx(Container,{sx:{display:'flex',justifyContent:'center',mt:5},children:/*#__PURE__*/_jsx(CircularProgress,{})});}// Filter donations to show only those where the current user is the recipient\nconst receivedDonations=donations&&Array.isArray(donations)?donations.filter(d=>d.recipient&&d.recipient._id===user._id):[];return/*#__PURE__*/_jsxs(Container,{sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Recipient Dashboard\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"subtitle1\",gutterBottom:true,children:[\"Welcome, \",user&&user.name,\"!\"]}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,sx:{mt:2},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Your Recent Requests\"}),requests&&requests.length>0?/*#__PURE__*/_jsx(List,{children:requests.slice(0,5).map(r=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ListItem,{alignItems:\"flex-start\",children:/*#__PURE__*/_jsx(ListItemText,{primary:\"Request for: \".concat(r.itemType),secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{component:\"span\",variant:\"body2\",color:\"text.primary\",children:[\"Status: \",r.status]}),\" - Quantity: \".concat(r.quantity,\", Urgency: \").concat(r.urgency)]})})}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"})]},r._id))}):/*#__PURE__*/_jsx(Typography,{children:\"You haven't made any requests yet.\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Donations You've Received\"}),receivedDonations&&receivedDonations.length>0?/*#__PURE__*/_jsx(List,{children:receivedDonations.slice(0,5).map(d=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{alignItems:\"flex-start\",children:[/*#__PURE__*/_jsx(ListItemText,{primary:\"Donation ID: \".concat(d.trackingId),secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{component:\"span\",variant:\"body2\",color:\"text.primary\",children:[\"Status: \",d.status]}),\" - Items: \".concat(d.items.map(i=>i.itemName).join(', '),\" From: \").concat(d.donor?d.donor.name:'N/A')]})}),/*#__PURE__*/_jsx(Button,{component:RouterLink,to:\"/tracking/\".concat(d._id),size:\"small\",children:\"View Details\"})]}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"})]},d._id))}):/*#__PURE__*/_jsx(Typography,{children:\"You haven't received any donations yet.\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Paper,{sx:{p:2,mt:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Quick Actions\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"contained\",component:RouterLink,to:\"/request/new\",sx:{mb:1},children:\"Make a New Request\"})]})})]})]});};const mapStateToProps=state=>({request:state.request,donation:state.donation,auth:state.auth});export default connect(mapStateToProps,{getRequests,getDonations})(RecipientDashboard);","map":{"version":3,"names":["React","useEffect","connect","getRequests","getDonations","Typography","Container","Paper","Grid","Card","CardContent","CircularProgress","Box","Button","List","ListItem","ListItemText","Divider","Link","RouterLink","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecipientDashboard","_ref","request","requests","loading","requestsLoading","donation","donations","donationsLoading","auth","user","sx","display","justifyContent","mt","children","receivedDonations","Array","isArray","filter","d","recipient","_id","variant","gutterBottom","name","container","spacing","item","xs","md","p","length","slice","map","r","alignItems","primary","concat","itemType","secondary","component","color","status","quantity","urgency","trackingId","items","i","itemName","join","donor","to","size","fullWidth","mb","mapStateToProps","state"],"sources":["C:/my project/Donation-App-master1/frontend/src/components/dashboard/RecipientDashboard.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { getRequests } from '../../actions/request'; // Recipients see their requests\nimport { getDonations } from '../../actions/donation'; // Recipients see donations they received\nimport { Typography, Container, Paper, Grid, Card, CardContent, CircularProgress, Box, Button, List, ListItem, ListItemText, Divider } from '@mui/material';\nimport { Link as RouterLink } from 'react-router-dom';\n\nconst RecipientDashboard = ({\n  getRequests,\n  getDonations,\n  request: { requests, loading: requestsLoading },\n  donation: { donations, loading: donationsLoading }, // donations received by this recipient\n  auth: { user }\n}) => {\n  useEffect(() => {\n    getRequests();\n    getDonations(); // This action should be smart enough to fetch donations for this recipient\n  }, [getRequests, getDonations]);\n\n  if (requestsLoading || donationsLoading) {\n    return (\n      <Container sx={{ display: 'flex', justifyContent: 'center', mt: 5 }}>\n        <CircularProgress />\n      </Container>\n    );\n  }\n  \n  // Filter donations to show only those where the current user is the recipient\n  const receivedDonations = donations && Array.isArray(donations) \n    ? donations.filter(d => d.recipient && d.recipient._id === user._id)\n    : [];\n\n  return (\n    <Container sx={{ mt: 4 }}>\n      <Typography variant=\"h4\" gutterBottom>\n        Recipient Dashboard\n      </Typography>\n      <Typography variant=\"subtitle1\" gutterBottom>\n        Welcome, {user && user.name}!\n      </Typography>\n\n      <Grid container spacing={3} sx={{ mt: 2 }}>\n        <Grid item xs={12} md={6}>\n          <Paper sx={{ p: 2 }}>\n            <Typography variant=\"h6\" gutterBottom>Your Recent Requests</Typography>\n            {requests && requests.length > 0 ? (\n              <List>\n                {requests.slice(0, 5).map((r) => (\n                  <React.Fragment key={r._id}>\n                    <ListItem alignItems=\"flex-start\">\n                      <ListItemText\n                        primary={`Request for: ${r.itemType}`}\n                        secondary={\n                          <>\n                            <Typography component=\"span\" variant=\"body2\" color=\"text.primary\">\n                              Status: {r.status}\n                            </Typography>\n                            {` - Quantity: ${r.quantity}, Urgency: ${r.urgency}`}\n                          </>\n                        }\n                      />\n                      {/* <Button component={RouterLink} to={`/request/details/${r._id}`} size=\"small\">View Details</Button> */}\n                    </ListItem>\n                    <Divider variant=\"inset\" component=\"li\" />\n                  </React.Fragment>\n                ))}\n              </List>\n            ) : (\n              <Typography>You haven't made any requests yet.</Typography>\n            )}\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} md={6}>\n          <Paper sx={{ p: 2 }}>\n            <Typography variant=\"h6\" gutterBottom>Donations You've Received</Typography>\n            {receivedDonations && receivedDonations.length > 0 ? (\n              <List>\n                {receivedDonations.slice(0, 5).map((d) => (\n                  <React.Fragment key={d._id}>\n                    <ListItem alignItems=\"flex-start\">\n                      <ListItemText\n                        primary={`Donation ID: ${d.trackingId}`}\n                        secondary={\n                          <>\n                            <Typography component=\"span\" variant=\"body2\" color=\"text.primary\">\n                              Status: {d.status}\n                            </Typography>\n                            {` - Items: ${d.items.map(i => i.itemName).join(', ')} From: ${d.donor ? d.donor.name : 'N/A'}`}\n                          </>\n                        }\n                      />\n                       <Button component={RouterLink} to={`/tracking/${d._id}`} size=\"small\">View Details</Button>\n                    </ListItem>\n                    <Divider variant=\"inset\" component=\"li\" />\n                  </React.Fragment>\n                ))}\n              </List>\n            ) : (\n              <Typography>You haven't received any donations yet.</Typography>\n            )}\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12}>\n          <Paper sx={{ p: 2, mt:1 }}>\n            <Typography variant=\"h6\" gutterBottom>Quick Actions</Typography>\n            <Button fullWidth variant=\"contained\" component={RouterLink} to=\"/request/new\" sx={{ mb: 1 }}>\n              Make a New Request\n            </Button>\n            {/* Add other recipient-specific links */}\n          </Paper>\n        </Grid>\n      </Grid>\n    </Container>\n  );\n};\n\nRecipientDashboard.propTypes = {\n  getRequests: PropTypes.func.isRequired,\n  getDonations: PropTypes.func.isRequired,\n  request: PropTypes.object.isRequired,\n  donation: PropTypes.object.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = (state) => ({\n  request: state.request,\n  donation: state.donation,\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, { getRequests, getDonations })(RecipientDashboard);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}