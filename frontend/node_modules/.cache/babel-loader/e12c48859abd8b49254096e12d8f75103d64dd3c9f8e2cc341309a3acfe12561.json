{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Container,Typography,Paper,List,ListItem,ListItemText,ListItemSecondaryAction,IconButton,Button,Box,Chip,Alert,CircularProgress,Divider}from'@mui/material';import{Delete as DeleteIcon,MarkEmailRead as MarkReadIcon,Notifications as NotificationsIcon}from'@mui/icons-material';import{getNotifications,markNotificationRead,markAllNotificationsRead,deleteNotification}from'../../actions/notification';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NotificationManagement=()=>{const dispatch=useDispatch();const{notifications,loading}=useSelector(state=>state.notification);const[localLoading,setLocalLoading]=useState(false);useEffect(()=>{dispatch(getNotifications());},[dispatch]);const handleMarkAsRead=async id=>{setLocalLoading(true);await dispatch(markNotificationRead(id));setLocalLoading(false);};const handleMarkAllAsRead=async()=>{setLocalLoading(true);await dispatch(markAllNotificationsRead());setLocalLoading(false);};const handleDelete=async id=>{if(window.confirm('Are you sure you want to delete this notification?')){setLocalLoading(true);await dispatch(deleteNotification(id));setLocalLoading(false);}};const unreadCount=notifications.filter(n=>!n.read).length;if(loading){return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4,display:'flex',justifyContent:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsx(Container,{maxWidth:\"lg\",sx:{mt:4,mb:4},children:/*#__PURE__*/_jsxs(Paper,{sx:{p:3},children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:3,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:[/*#__PURE__*/_jsx(NotificationsIcon,{sx:{mr:1,verticalAlign:'middle'}}),\"Notification Management\"]}),unreadCount>0&&/*#__PURE__*/_jsxs(Button,{variant:\"contained\",color:\"primary\",onClick:handleMarkAllAsRead,disabled:localLoading,children:[\"Mark All as Read (\",unreadCount,\")\"]})]}),notifications.length===0?/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"No notifications found. You're all caught up!\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",gutterBottom:true,children:[\"Total Notifications: \",notifications.length,unreadCount>0&&/*#__PURE__*/_jsx(Chip,{label:\"\".concat(unreadCount,\" Unread\"),color:\"primary\",size:\"small\",sx:{ml:2}})]}),/*#__PURE__*/_jsx(List,{children:notifications.map((notification,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{sx:{backgroundColor:notification.read?'transparent':'action.hover',borderRadius:1,mb:1},children:[/*#__PURE__*/_jsx(ListItemText,{primary:/*#__PURE__*/_jsxs(Box,{display:\"flex\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",sx:{fontWeight:notification.read?'normal':'bold',mr:1},children:notification.title}),!notification.read&&/*#__PURE__*/_jsx(Chip,{label:\"New\",color:\"primary\",size:\"small\"})]}),secondary:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:notification.message}),/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",children:new Date(notification.createdAt).toLocaleString()})]})}),/*#__PURE__*/_jsx(ListItemSecondaryAction,{children:/*#__PURE__*/_jsxs(Box,{children:[!notification.read&&/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"mark as read\",onClick:()=>handleMarkAsRead(notification._id),disabled:localLoading,sx:{mr:1},children:/*#__PURE__*/_jsx(MarkReadIcon,{})}),/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:()=>handleDelete(notification._id),disabled:localLoading,color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})]})})]}),index<notifications.length-1&&/*#__PURE__*/_jsx(Divider,{})]},notification._id))})]})]})});};export default NotificationManagement;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","Container","Typography","Paper","List","ListItem","ListItemText","ListItemSecondaryAction","IconButton","Button","Box","Chip","Alert","CircularProgress","Divider","Delete","DeleteIcon","MarkEmailRead","MarkReadIcon","Notifications","NotificationsIcon","getNotifications","markNotificationRead","markAllNotificationsRead","deleteNotification","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NotificationManagement","dispatch","notifications","loading","state","notification","localLoading","setLocalLoading","handleMarkAsRead","id","handleMarkAllAsRead","handleDelete","window","confirm","unreadCount","filter","n","read","length","maxWidth","sx","mt","mb","display","justifyContent","children","p","alignItems","variant","component","gutterBottom","mr","verticalAlign","color","onClick","disabled","severity","label","concat","size","ml","map","index","backgroundColor","borderRadius","primary","fontWeight","title","secondary","message","Date","createdAt","toLocaleString","edge","_id"],"sources":["C:/my project/Donation-App-master1/frontend/src/components/notifications/NotificationManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  IconButton,\r\n  Button,\r\n  Box,\r\n  Chip,\r\n  Alert,\r\n  CircularProgress,\r\n  Divider\r\n} from '@mui/material';\r\nimport {\r\n  Delete as DeleteIcon,\r\n  MarkEmailRead as MarkReadIcon,\r\n  Notifications as NotificationsIcon\r\n} from '@mui/icons-material';\r\nimport {\r\n  getNotifications,\r\n  markNotificationRead,\r\n  markAllNotificationsRead,\r\n  deleteNotification\r\n} from '../../actions/notification';\r\n\r\nconst NotificationManagement = () => {\r\n  const dispatch = useDispatch();\r\n  const { notifications, loading } = useSelector(state => state.notification);\r\n  const [localLoading, setLocalLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    dispatch(getNotifications());\r\n  }, [dispatch]);\r\n\r\n  const handleMarkAsRead = async (id) => {\r\n    setLocalLoading(true);\r\n    await dispatch(markNotificationRead(id));\r\n    setLocalLoading(false);\r\n  };\r\n\r\n  const handleMarkAllAsRead = async () => {\r\n    setLocalLoading(true);\r\n    await dispatch(markAllNotificationsRead());\r\n    setLocalLoading(false);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this notification?')) {\r\n      setLocalLoading(true);\r\n      await dispatch(deleteNotification(id));\r\n      setLocalLoading(false);\r\n    }\r\n  };\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length;\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4, display: 'flex', justifyContent: 'center' }}>\r\n        <CircularProgress />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n            <NotificationsIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Notification Management\r\n          </Typography>\r\n          {unreadCount > 0 && (\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={handleMarkAllAsRead}\r\n              disabled={localLoading}\r\n            >\r\n              Mark All as Read ({unreadCount})\r\n            </Button>\r\n          )}\r\n        </Box>\r\n\r\n        {notifications.length === 0 ? (\r\n          <Alert severity=\"info\">\r\n            No notifications found. You're all caught up!\r\n          </Alert>\r\n        ) : (\r\n          <>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Total Notifications: {notifications.length}\r\n              {unreadCount > 0 && (\r\n                <Chip \r\n                  label={`${unreadCount} Unread`} \r\n                  color=\"primary\" \r\n                  size=\"small\" \r\n                  sx={{ ml: 2 }} \r\n                />\r\n              )}\r\n            </Typography>\r\n            \r\n            <List>\r\n              {notifications.map((notification, index) => (\r\n                <React.Fragment key={notification._id}>\r\n                  <ListItem\r\n                    sx={{\r\n                      backgroundColor: notification.read ? 'transparent' : 'action.hover',\r\n                      borderRadius: 1,\r\n                      mb: 1\r\n                    }}\r\n                  >\r\n                    <ListItemText\r\n                      primary={\r\n                        <Box display=\"flex\" alignItems=\"center\">\r\n                          <Typography \r\n                            variant=\"subtitle1\" \r\n                            sx={{ \r\n                              fontWeight: notification.read ? 'normal' : 'bold',\r\n                              mr: 1\r\n                            }}\r\n                          >\r\n                            {notification.title}\r\n                          </Typography>\r\n                          {!notification.read && (\r\n                            <Chip label=\"New\" color=\"primary\" size=\"small\" />\r\n                          )}\r\n                        </Box>\r\n                      }\r\n                      secondary={\r\n                        <>\r\n                          <Typography variant=\"body2\" color=\"text.secondary\">\r\n                            {notification.message}\r\n                          </Typography>\r\n                          <Typography variant=\"caption\" color=\"text.secondary\">\r\n                            {new Date(notification.createdAt).toLocaleString()}\r\n                          </Typography>\r\n                        </>\r\n                      }\r\n                    />\r\n                    <ListItemSecondaryAction>\r\n                      <Box>\r\n                        {!notification.read && (\r\n                          <IconButton\r\n                            edge=\"end\"\r\n                            aria-label=\"mark as read\"\r\n                            onClick={() => handleMarkAsRead(notification._id)}\r\n                            disabled={localLoading}\r\n                            sx={{ mr: 1 }}\r\n                          >\r\n                            <MarkReadIcon />\r\n                          </IconButton>\r\n                        )}\r\n                        <IconButton\r\n                          edge=\"end\"\r\n                          aria-label=\"delete\"\r\n                          onClick={() => handleDelete(notification._id)}\r\n                          disabled={localLoading}\r\n                          color=\"error\"\r\n                        >\r\n                          <DeleteIcon />\r\n                        </IconButton>\r\n                      </Box>\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                  {index < notifications.length - 1 && <Divider />}\r\n                </React.Fragment>\r\n              ))}\r\n            </List>\r\n          </>\r\n        )}\r\n      </Paper>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default NotificationManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}